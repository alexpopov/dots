# 0x5A is F20 in Karabiner Elements, but for some reason yabai doesn't agree
# with using the name 'f20'. No clue why

:: default : alert.sh simple default

# Mode: Hyper
:: m_hyper @ : alert.sh simple hyper

# Mode: Yabai/windows
:: m_windows @ : alert.sh simple windows

# Mode: open!
:: m_open @ : alert.sh simple open

# Mode: Yabai config
:: m_yabai_config @ : alert.sh simple 'Configuring Yabai'

# Mode: Yabai config
:: m_window_focus @ : alert.sh simple 'Focusing'

:: m_window_create @ : alert.sh simple 'Creating'

:: m_window_resize @ : alert.sh simple 'Resize'

default < 0x5A ; m_hyper
default < hyper - s ; m_windows

# Exit Hyper
m_hyper, m_windows, m_open, m_yabai_config, m_window_focus, m_window_create, m_window_resize < escape ; default
m_hyper, m_windows, m_open, m_yabai_config, m_window_focus, m_window_create, m_window_resize < 0x5A ; default

# R -> reload
m_hyper < r : skhd --reload; alert.sh simple reloading...
# V -> clipboard
m_hyper < v : skhd -k escape; skhd -k "hyper - v"
# O -> open
m_hyper < o : open
# S -> windows/yabai
m_hyper < s ; m_windows

m_hyper < escape ; default


#
# Window Management Mode & Yabai
#
m_windows < h : yabai_utils.sh focus west back_to_default
m_windows < j : yabai_utils.sh focus south back_to_default
m_windows < k : yabai_utils.sh focus north back_to_default
m_windows < l : yabai_utils.sh focus east back_to_default

m_windows < n : yabai_utils.sh focus stack.next back_to_default
m_windows < p : yabai_utils.sh focus stack.prev back_to_default

# Fullscreen 'd' just because it's convenient
m_windows < d : yabai_utils.sh fullscreen back_to_default

m_windows < u : yabai_utils.sh toggle_manage back_to_default

# Focus mode
m_windows < f ; m_window_focus
# Create mode
m_windows < c ; m_window_create
# Grid mode
m_windows < r ; m_window_resize


# Focus Mode
m_window_focus < h : yabai_utils.sh focus west
m_window_focus < j : yabai_utils.sh focus south
m_window_focus < k : yabai_utils.sh focus north
m_window_focus < l : yabai_utils.sh focus east
m_window_focus < n : yabai_utils.sh focus stack.next
m_window_focus < p : yabai_utils.sh focus stack.prev
m_window_focus < f : yabai_utils.sh focus most_reasonable back_to_default

# Create Mode
m_window_create < h : yabai_utils.sh stack west back_to_default
m_window_create < j : yabai_utils.sh stack south back_to_default
m_window_create < k : yabai_utils.sh stack north back_to_default
m_window_create < l : yabai_utils.sh stack east back_to_default

m_window_create < u : yabai_utils.sh unstack back_to_default

# Grid Mode
m_window_resize < c : yabai_utils.sh grid centre back_to_default
m_window_resize < m : yabai_utils.sh grid small-centre back_to_default

#
# Yabai configuration stuff
#
m_windows < 0x2A ; m_yabai_config

m_yabai_config < f : yabai_utils.sh config float back_to_default
m_yabai_config < t : yabai_utils.sh config bsp back_to_default
m_yabai_config < r : yabai_utils.sh reload_config back_to_default
